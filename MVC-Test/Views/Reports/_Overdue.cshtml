@using Microsoft.AspNetCore.Authorization;
@using Microsoft.AspNetCore.Mvc;
@using Group6Application.Models
@model DownloadTasksView

<div class="row">
    <div class="col-md-12">
        <h2>Overdue Tasks</h2>
    </div>    
    <div class="col-md-12">
        @if (Model.Tasks.Count == 0)
        {
            <p>No overdue tasks found for this Department</p>
        }
        else{
            <table class="table">
                <tr>
                    <th>Task ID</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Assignee</th>
                    <th>Project</th>
                    <th>Days Overdue</th>
                    <th>Due Date</th>

                </tr>

                @foreach (TaskInformation task in Model.Tasks)
                {
                    @if (@task.task.Due < @DateTime.Now)
                    {
                





                            <tr>
                                <td><a href="/Task?taskID=@task.task.ID">@task.task.ID</a></td>
                                <td>@task.task.Name</td>
                                <td>@task.task.Description</td>
                                <td><a href="/Employee/View?id=@task.employee.ID">@task.employee.FirstName @task.employee.LastName</a></td>
                                <td><a href="/Project/View?id=@task.project.ID">@task.project.Name</a></td>
                                <td>@Convert.ToInt32((DateTime.Now - task.task.Due).Value.TotalDays)</td>
                                <td>@task.task.Due</td>
                            </tr>

                    }
                }

            </table>
        }
        
    </div>
</div>